<section class="info">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>{{ jira_tickets | length }} Jira Tickets</h2>
        <button onclick="linkJira()">Link Jira</button>
    </div>
    <br>
    {{ jira_table(jira_tickets.project(jira_cols), include_checkbox=True) }}
</section>

<script>
    function linkJira() {
        const checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');
        const selectedTickets = Array.from(checkboxes).map(cb => cb.value);

        if (selectedTickets.length > 0) {
            const data = encodeURIComponent(JSON.stringify(selectedTickets));
            window.location.href = `custom-protocol:${data}`;
        } else {
            alert("No tickets selected.");
        }
    }
</script>
