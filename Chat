qimport requests
import json

# ALM Octane API Details
base_url = "https://<server>:<port>"  # Replace with your Octane URL
shared_space_id = "<shared_space_id>"
workspace_id = "<workspace_id>"
suiterun_id = "<your_suiterun_id>"  # Replace with the actual SuiteRun ID

# Authentication (Assuming you already have `cookies` from login)
headers = {"Content-Type": "application/json"}

# Query for test runs linked to the given SuiteRun ID
query_params = f'?query="suite_run EQ {suiterun_id}"'
test_results_url = f"{base_url}/api/shared_spaces/{shared_space_id}/workspaces/{workspace_id}/test-runs{query_params}"

# Fetch test runs
response = requests.get(test_results_url, headers=headers, cookies=cookies)

# Check response and display results
if response.status_code == 200:
    test_runs = response.json()
    print("Fetched Test Runs for SuiteRun ID:", suiterun_id)
    print(json.dumps(test_runs, indent=4))
else:
    print(f"Failed to fetch test runs: {response.status_code} - {response.text}")
